# Домашнее задание к занятию "10.3 Pacemaker" - Екимовский К.

---

### Задание 1.
Pacemaker — это менеджер ресурсов кластера со следующими основными функциями:

● Обнаружение и восстановление сбоев на уровне узлов и сервисов;

● Независимость от подсистемы хранения: общий диск не требуется;

● Независимость от типов ресурсов: все, что может быть заскриптовано, может быть кластеризовано;

● Поддержка STONITH (Shoot-The-Other-Node-In-The-Head)

● Поддержка кластеров любого размера;

● Поддержка и кворумных и ресурсозависимых кластеров;

● Поддержка практически любой избыточной конфигурации;

● Автоматическая репликация конфига на все узлы кластера;

● Возможность задания порядка запуска ресурсов, а также их совместимости на одном узле;

● Поддержка расширенных типов ресурсов: клонов (запущен на множестве узлов) и с дополнительными состояниями (master/slave и т.п.);

● Единый кластерный шелл (crm), унифицированный, скриптующийся.

---

### Задание 2.
Corosync  — программный продукт, позволяющий реализовать кластер серверов. Его основное назначение — знать и передавать состояние всех участников кластера.
В основе работы заложены следующие функции:

● Отслеживание состояния приложений;

● Оповещение приложений о смене активной ноды кластера;

● Отправка одинаковых сообщений процессам на всех узлах кластера;

● Предоставление доступа к базе данных с конфигурацией и статистикой, а также отправка уведомлений о ее изменениях.
 
---

### Задание 3.

# /etc/hosts:

```
192.168.13.234	node1
192.168.13.240	node2
```
# /etc/corosync/corosync.conf:

```
totem {
    version: 2
    cluster_name: newcluster
    transport: knet
    crypto_cipher: aes256
    crypto_hash: sha256
}

nodelist {
    node {
        ring0_addr: node1
        name: node1
        nodeid: 1
    }

    node {
        ring0_addr: node2
        name: node2
        nodeid: 2
    }
}

quorum {
    provider: corosync_votequorum
    two_node: 1
}

logging {
    to_logfile: yes
    logfile: /var/log/corosync/corosync.log
    to_syslog: yes
    timestamp: on
}
```

Веб-интерфейс:

![alt text](https://github.com/konstantinekimovskii/srlb-11-homework/blob/main/10.3/files/2022Dec1056.png)

Бэкап конфига: https://github.com/konstantinekimovskii/srlb-11-homework/raw/main/10.3/files/netolog-testcluster.tar.bz2 

---
